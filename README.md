# Секретарь - Приложение для записи и распознавания разговоров

Веб-приложение "Секретарь" предназначено для записи разговоров, их распознавания с помощью сервиса Google Gemini и последующей обработки распознанного текста с помощью ИИ-агентов.

## Функциональность

- Непрерывная запись аудио с микрофона пользователя до нажатия кнопки "Стоп"
- Визуализация звуковой волны в реальном времени
- Распознавание речи с помощью Google Gemini API
- Обработка распознанного текста с помощью ИИ-агентов (шутник, скептик, умник)
- Отображение результатов распознавания и комментариев агентов

## Технологии

- HTML5
- CSS3
- Vanilla JavaScript
- Web Audio API
- MediaRecorder API
- Google Gemini API (1.5 Flash)

## Установка и запуск

1. Клонируйте репозиторий:
```
git clone https://github.com/yourusername/secretary-app.git
cd secretary-app
```

2. Откройте файл `index.html` в вашем браузере или используйте локальный сервер:
```
# Если у вас установлен Python 3:
python -m http.server

# Если у вас установлен Node.js:
npx serve
```

3. Разрешите доступ к микрофону в браузере.

## Использование

1. Нажмите кнопку "Начать запись" для начала записи.
2. Говорите в микрофон. Запись будет продолжаться непрерывно.
3. Нажмите кнопку "Остановить запись" для завершения записи.
4. Дождитесь завершения распознавания и обработки текста.
5. Просмотрите распознанный текст и комментарии ИИ-агентов.

## Настройка Google Gemini API

Для работы с Google Gemini API необходимо:

1. Получить API ключ на сайте [Google AI Studio](https://ai.google.dev/)
2. Заменить значение переменной `GEMINI_API_KEY` в файле `script.js` на ваш ключ

## Интеграция с Google Gemini API

Приложение использует Google Gemini API для двух основных функций:

1. **Распознавание речи из аудиозаписи**:
   - Аудиозапись конвертируется в формат base64
   - Отправляется запрос к модели Gemini 1.5 Flash с аудиоданными
   - Полученный текст отображается в разделе "Распознанный текст"

2. **Генерация комментариев от ИИ-агентов**:
   - Для каждого агента (шутник, скептик, умник) формируется отдельный запрос
   - Каждый агент имеет свою роль и инструкции для анализа текста
   - Ответы агентов отображаются в соответствующих панелях

### Тестирование API

В репозитории также есть файл `test-audio-upload.html`, который можно использовать для тестирования интеграции с Gemini API. Этот файл позволяет загрузить аудиофайл и отправить его на распознавание, чтобы проверить работу API без использования записи с микрофона.

## Особенности работы

- Запись продолжается непрерывно до тех пор, пока пользователь не нажмет кнопку "Остановить запись"
- Данные аудио собираются каждые 10 секунд, но запись не прерывается
- После остановки записи все собранные аудиоданные отправляются на распознавание
- Приложение использует модель Gemini 1.5 Flash для быстрого распознавания и обработки
- Для распознавания речи используется низкая температура (0.2) для более точных результатов
- Для генерации комментариев агентов используется более высокая температура (0.7) для креативности
- Приложение поддерживает аудиоформаты WAV, MP3, OGG, FLAC, AAC и AIFF
- Максимальная длительность аудиозаписи для Gemini 1.5 Flash составляет 9.5 часов

## Лицензия

MIT 