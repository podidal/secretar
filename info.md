Техническая документация приложения «Секретарь»
add gemeni ai key AIzaSyB8oKZIbyeH7Ttv2kmTn8cEhFiUYKolv3g docs https://ai.google.dev/gemini-api/docs/get-started/tutorial?lang=python&hl=ru

1. Обзор проекта
Приложение «Секретарь» предназначено для записи разговоров, их распознавания с помощью сервиса Google Gemini и последующей обработки распознанного текста. Дополнительно приложение активирует несколько «ИИ-агентов» (например, шутник, скептик, умник и еще по выбору), которые посредством API (например, Google Gemini) комментируют или анализируют полученную информацию. Интерфейс отображает:

Статус распознавания (серым текстом),
Итоговый диалог (нормальным текстом),
Ответы каждого агента в отдельных панелях.


2. Архитектура системы
Основные компоненты:
Клиентская часть: HTML, CSS,vanilla JavaScript.
Модули работы с аудио: Использование браузерных API (MediaDevices.getUserMedia, MediaRecorder, Web Audio API) для записи и анализа звука.
Интеграция с внешними API:
Google Gemini – для распознавания речи.
Google Gemini – для формирования ответов от ИИ-агентов.
Модуль обработки текста: Объединение распознанных фрагментов в общий диалог и дополнительная постобработка (например, обработка ии-агентов).
Модуль управления ИИ-агентами: Отправка запросов к API для формирования комментариев по ролям.
UI модуль: Отображение статуса, диалога и ответов агентов.
3. Модули и их функции
3.1. Модуль захвата аудио (Audio Capture Module)
Ответственность:
Обеспечить запись аудиопотока, детектировать паузы и управлять таймингом записи.

Основные функции:

Запуск записи через микрофон.
отправка в ии, инициированная либо обнаруженной паузой, либо достижением лимита времени отрезка записи.
detectSilence(): Анализ аудиопотока для определения пауз в речи.
manageRecordingTimer(): Отслеживание времени записи (например, 5 секунд) для максимальной длинны куска записи при отсутствии паузы в речи.
Используемые технологии:
MediaRecorder API, Web Audio API.

3.2. Модуль распознавания речи (Speech Recognition Module)
Ответственность:
Отправка аудиофрагмента в ии, получение и первичная обработка ответа.

Основные функции:

sendAudio(audioData): Отправка аудиоданных на сервер Google Gemini  
.
processResponse(response): Извлечение распознанного текста из ответа API.
Интерфейс с внешним API:

Формат ответа: согласно документации google gemini
3.3. Модуль обработки текста (Text Processing Module)
Ответственность:
Формирование и обновление общего диалога на основе распознанных фрагментов.

Основные функции:

appendRecognizedText(text): Добавление нового фрагмента текста в общий диалог.
 
Связь с UI:
Интегрируется с модулем отображения для обновления диалогового окна.

3.4. Модуль ИИ-агентов (AI Agents Module)
Ответственность:
Генерация ответов или комментариев по распознанному тексту с использованием API ИИ-агентов.

Основные функции:

triggerAgentResponses(newTextSegment): Инициирует последовательность вызовов для каждого выбранного агента.
sendToAgent(agentId, text): Формирует и отправляет запрос конкретному агенту, учитывая его роль (например, адвокат,  шутник и т.д.).
processAgentResponse(agentResponse): Обрабатывает ответы от агентов и передаёт их в UI модуль для отображения.
Конфигурация агентов:

Список стандартных агентов (6 по умолчанию) с заданными ролями.
Возможность изменения и добавления или замены агентов через UI
Интерфейс с внешним API gemeni

3.5. UI модуль (User Interface Module)
Ответственность:
Обеспечить интерактивное отображение процесса и результатов работы приложения.

Компоненты интерфейса:

Индикатор записи: Отображение статуса (например, «Распознавание…» в виде серого текста). сигнал микрофона в виде эквалайзера как в диктофоне 
Область диалога: Отображение всего текста диалога, который обновляется по мере распознавания.
Панели ответов агентов: Отдельные окна для каждого ИИ-агента, где показывается его комментарий.
Элементы управления: Кнопки запуска/остановки записи, выбор агентов. анимация голоса с микрофона 
Основные функции:


updateRecordingStatus(statusText): Обновление информации о статусе записи/распознавания.
displayConversation(text): Обновление окна диалога новым текстом.
displayAgentResponse(agentId, responseText): Вывод ответа конкретного агента в соответствующую панель.
4. Поток данных и логика взаимодействия модулей
Запуск записи:

Пользователь инициирует запись (нажатие кнопки «Старт»).
Модуль захвата аудио начинает запись с помощью startRecording(), одновременно запускается таймер и активируется функция detectSilence().
Условие остановки записи:

Если обнаружена пауза (с помощью detectSilence()), или если прошло 5 секунд без значительной паузы (через manageRecordingTimer()), вызывается sendAudio(audioData).
Сформированный аудиофрагмент передаётся в модуль распознавания речи.
Распознавание речи:

Функция sendAudio(audioData) отправляет аудиоданные на gemeni api
Полученный ответ обрабатывается функцией processGemeniSpeachResponse(response).
Обновление диалога: gtyhtjlbxtcrb

Модуль UI обновляет окно диалога с помощью displayConversation(text).
Запуск ИИ-агентов:

При добавлении нового фрагмента диалога автоматически вызывается triggerAgentResponses(newTextSegment).
Для каждого агента с помощью sendToAgent(agentId, text) отправляется запрос.
Ответы от агентов обрабатываются через processAgentResponse(agentResponse) и отображаются в UI с помощью displayAgentResponse(agentId, responseText).
Обратная связь для пользователя:

В процессе работы UI показывает логи и статус («Распознавание…» серым цветом) и обновляет информацию по мере поступления результатов.
Ответы агентов выводятся в заранее отведённых для этого панелях.
5. Обработка ошибок и исключительных ситуаций
Ошибки аудиозаписи:
Если пользователь не разрешил доступ к микрофону, приложение выводит сообщение об ошибке и предлагает повторить попытку.
Ошибки API (Gemini):
При отсутствии ответа, таймаутах или ошибках от API выводятся уведомления в интерфейсе с предложением повторить попытку.
Непредвиденные ошибки:
Все операции обернуты в try-catch, ошибки логируются в консоль и отображаются в UI для отладки.

Каждый модуль реализован независимо, что облегчает покрытие юнит-тестами и позволяет легко заменять компоненты (например, сменить API для распознавания речи).
UI и UX:
Интерфейс разработан с учетом возможности масштабирования и адаптивности, что позволит при необходимости добавлять новые элементы или изменять существующие.